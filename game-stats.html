<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Game Stats</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="app.css">
</head>
<body>
    <div id="gameDetails" class="game-details">Loading game details...</div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const gameId = urlParams.get('gameId');
            const gameDetailsContainer = document.getElementById('gameDetails');
            const sportsLeagues = {
                mlb: 'baseball',
                nba: 'basketball',
                nhl: 'hockey'
                };

            async function fetchGameDetails(gameId) {
                const apiUrl = `https://site.api.espn.com/apis/site/v2/sports/baseball/mlb/scoreboard/${gameId}`;
                try {
                    const response = await fetch(apiUrl);
                    if (!response.ok) {
                        throw new Error('Network response was not ok: ' + response.statusText);
                    }
                    const data = await response.json();
                    if (data && data.competitions && data.competitions.length > 0) {
                        displayGameDetails(data.competitions[0]);
                    } else {
                        gameDetailsContainer.innerHTML = 'No game details available.';
                    }
                } catch (error) {
                    gameDetailsContainer.innerHTML = 'Failed to load game details.';
                    console.error('Error fetching game details:', error);
                }
            }

            function displayGameDetails(competition) {
                gameDetailsContainer.innerHTML = '';

                const gameTitle = document.createElement('h1');
                gameTitle.textContent = competition.name || 'Game Details';
                gameDetailsContainer.appendChild(gameTitle);

                competition.competitors.forEach(competitor => {
                    const teamInfo = document.createElement('div');
                    teamInfo.className = 'team-info';
                    const logo = document.createElement('img');
                    logo.src = competitor.team.logo;
                    logo.className = 'team-logo';
                    teamInfo.appendChild(logo);

                    const details = document.createElement('span');
                    details.innerHTML = `<strong>${competitor.team.displayName}</strong> - Score: ${competitor.score}<br/>`;

                    const hits = competitor.statistics.find(stat => stat.name === 'hits');
                    if (hits) {
                        details.innerHTML += `Hits: ${hits.displayValue}<br/>`;
                    }

                    teamInfo.appendChild(details);
                    gameDetailsContainer.appendChild(teamInfo);
                });
            }

            fetchGameDetails(gameId);
        });
    </script>
</body>
</html>
